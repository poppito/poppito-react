(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"6qfE":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("RSLW");Object.defineProperty(n,"MDXTag",{enumerable:!0,get:function(){return r(a).default}});var o=t("Fobl");function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"MDXProvider",{enumerable:!0,get:function(){return r(o).default}})},BdtC:function(e,n,t){"use strict";var a=t("q1tI"),o=t.n(a),r=t("qhky"),i=t("Wbzz");var l=function(e){var n=e.children,t=e.color,a=e.pageContext.header;return o.a.createElement(i.StaticQuery,{query:"3649515864",render:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(r.b,{title:e.site.siteMetadata.title},o.a.createElement("html",{lang:"en"})),o.a.createElement("div",{className:"blogpage"},o.a.createElement("a",{href:"/blog",smooth:!0,duration:1e3},"Back")),o.a.createElement("div",{className:"blogText"},o.a.createElement("h1",{title:a,color:t}),o.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0px 1.0875rem 1.45rem",paddingTop:0}},n,o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("p",null,"Questions? Suggestions? Compliments? Tips to make this post better? I'd love to hear your thoughts ",o.a.createElement("a",{href:"https://twitter.com/overjeer"},"on twitter")))))}})};n.a=function(e){return o.a.createElement(l,Object.assign({},e,{color:"#f9f9f9"}))}},Fobl:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.withMDXComponents=void 0;var a,o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},r=t("q1tI"),i=(a=r)&&a.__esModule?a:{default:a};var l=i.default.createContext({}),m=l.Provider,c=l.Consumer;n.withMDXComponents=function(e){return function(n){return i.default.createElement(c,null,(function(t){return i.default.createElement(e,o({},n,{components:n.components||t}))}))}};n.default=function(e){return i.default.createElement(m,{value:e.components},e.children)}},GIwU:function(e,n,t){e.exports=t.p+"static/notification_permissions-d227e070a3ae488ad0e334ff4e93c650.webm"},RSLW:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},r=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),i=t("q1tI"),l=(a=i)&&a.__esModule?a:{default:a},m=t("Fobl");function c(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}var p={inlineCode:"code",wrapper:"div"},u=function(e){function n(){return c(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),r(n,[{key:"render",value:function(){var e=this.props,n=e.name,t=e.parentName,a=e.props,r=void 0===a?{}:a,i=e.children,m=e.components,c=void 0===m?{}:m,s=e.Layout,u=e.layoutProps,d=c[t+"."+n]||c[n]||p[n]||n;return s?l.default.createElement(s,o({components:c},u),l.default.createElement(d,r,i)):l.default.createElement(d,r,i)}}]),n}(i.Component);n.default=(0,m.withMDXComponents)(u)},juGA:function(e,n,t){e.exports=t.p+"static/android_13_icons-520b3d9c6866b1af5b0f295f5403834d.png"},"kL9+":function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return g}));var a=t("zLVn"),o=t("dI71"),r=t("q1tI"),i=t.n(r),l=t("6qfE"),m=t("GIwU"),c=t.n(m),s=t("juGA"),p=t.n(s),u=t("BdtC"),d=["components"],f={},g=function(e){function n(n){var t;return(t=e.call(this,n)||this).layout=u.a,t}return Object(o.a)(n,e),n.prototype.render=function(){var e=this.props,n=e.components,t=Object(a.a)(e,d);return i.a.createElement(l.MDXTag,{name:"wrapper",Layout:this.layout,layoutProps:Object.assign({},f,t),components:n},i.a.createElement(l.MDXTag,{name:"h1",components:n},"Android 13 Preview 2"),i.a.createElement(l.MDXTag,{name:"p",components:n},"Last weekend I finally got some time to have a play with the Android 13 emulator and I have to admit,\nits a bit rough around the edges."),i.a.createElement(l.MDXTag,{name:"p",components:n},"For example all the icons in the launcher are humongo 😮"),i.a.createElement("img",{src:p.a,width:"30%"}),i.a.createElement(l.MDXTag,{name:"p",components:n},"Anyway nothing ventured, nothing gained I figured."),i.a.createElement(l.MDXTag,{name:"h1",components:n},"Notifications and runtime permissions."),i.a.createElement(l.MDXTag,{name:"p",components:n},"The main goal I had in mind when I downloaded the new emulator was checking out the shiny new ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"POST_NOTIFICATIONS"),"\npermission being introduced in Android 13."),i.a.createElement(l.MDXTag,{name:"p",components:n},"So, what is it?"),i.a.createElement(l.MDXTag,{name:"p",components:n},"Well, iOS has had it for a while and essentially it is a permission prompt for Android apps targeting Android 13 (SDK level 33 and above)\nasking the user whether they want to receieve notifications. I think this is a great win not only for user experience, but also a win from\nthe privacy perspective."),i.a.createElement(l.MDXTag,{name:"p",components:n},"Anyway, here's how I went about testing it 📝"),i.a.createElement(l.MDXTag,{name:"ul",components:n},i.a.createElement(l.MDXTag,{name:"li",components:n,parentName:"ul"},"Downloading Android 13 (Codename Tiramisum) from the SDK manager."),i.a.createElement(l.MDXTag,{name:"li",components:n,parentName:"ul"},"In my app's ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"build.gradle")," changing the ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"compileSdkVersion")," to  ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"android-Tiramisu")," and ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"targetSdkVersion")," to ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"Tiramisu"),"."),i.a.createElement(l.MDXTag,{name:"li",components:n,parentName:"ul"},"Downloading Android Studio Dolphin Canary 7."),i.a.createElement(l.MDXTag,{name:"li",components:n,parentName:"ul"},"Downloading Android build tools version ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"33.0.0 rc2")," and updating the ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"buildToolsVersion")," in my app's ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"build.gradle")," to ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"33.0.0-rc2")),i.a.createElement(l.MDXTag,{name:"li",components:n,parentName:"ul"},"Downloading the emulator ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"arm64-v8a")," image for ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"Android Tiramisu")," in the emulator creation wizard in Android Studio.")),i.a.createElement(l.MDXTag,{name:"p",components:n},"Ok, now we're cooking with gas 🔥"),i.a.createElement(l.MDXTag,{name:"p",components:n},"Because this is a runtime permission, you also need to follow the general steps 📝"),i.a.createElement(l.MDXTag,{name:"ul",components:n},i.a.createElement(l.MDXTag,{name:"li",components:n,parentName:"ul"},"Call the ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"checkSelfPermission")," API for ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"POST_NOTIFICATIONS"),","),i.a.createElement(l.MDXTag,{name:"li",components:n,parentName:"ul"},"If this does not return ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"PERMISSION_GRANTED"),","),i.a.createElement(l.MDXTag,{name:"li",components:n,parentName:"ul"},"Then check if the permission rationale (ie. why you need this permission) dialog."),i.a.createElement(l.MDXTag,{name:"li",components:n,parentName:"ul"},"If it returns false, you can call ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"requestPermissions")," for ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"POST_NOTIFICATIONS")," directly."),i.a.createElement(l.MDXTag,{name:"li",components:n,parentName:"ul"},"If in the the permission rationale dialog, the user clicks the ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"positiveButton"),", call ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"requestPermissions")," for ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"POST_NOTIFICATIONS"),".")),i.a.createElement(l.MDXTag,{name:"p",components:n},"unfortunately, checking for ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"SDK_INT >= 33")," does not work currently, so I had to make do with calling ",i.a.createElement(l.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"SDK_INT >= 32")," instead."),i.a.createElement(l.MDXTag,{name:"pre",components:n},i.a.createElement(l.MDXTag,{name:"code",components:n,parentName:"pre",props:{}},"        if (Build.VERSION.SDK_INT >= 32) {\n            String[] permission = {POST_NOTIFICATIONS};\n            if (checkSelfPermission(POST_NOTIFICATIONS) != PackageManager.PERMISSION_GRANTED) {\n                if (!shouldShowRequestPermissionRationale(POST_NOTIFICATIONS)) {\n                    requestPermissions(permission, 1001);\n                } else {\n                    showNotificationRationale();\n                }\n            }\n        }\n")),i.a.createElement("div",{align:"center"},i.a.createElement("h3",null," Here's what it looks like 👌 "),i.a.createElement("video",{width:"30%",controls:!0,autostart:!0,autoPlay:!0,src:c.a,type:"video/mp4"})))},n}(i.a.Component);g.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-blog-2022-04-05-notification-permissions-android-13-mdx-8369c469242f0182beaa.js.map