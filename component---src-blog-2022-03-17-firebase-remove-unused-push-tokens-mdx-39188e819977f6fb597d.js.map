{"version":3,"sources":["webpack:///./node_modules/@mdx-js/tag/dist/index.js","webpack:///./node_modules/@mdx-js/tag/dist/mdx-provider.js","webpack:///./node_modules/@mdx-js/tag/dist/mdx-tag.js","webpack:///./src/blog/2022-03-17-Firebase-remove-unused-push-tokens.mdx","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"],"names":["Object","defineProperty","exports","value","_mdxTag","enumerable","get","_interopRequireDefault","default","_mdxProvider","obj","__esModule","withMDXComponents","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_react","_react2","_React$createContext","createContext","Provider","Consumer","Component","props","createElement","contextComponents","components","children","_createClass","defineProperties","descriptor","configurable","writable","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","defaults","inlineCode","wrapper","MDXTag","_Component","this","__proto__","getPrototypeOf","apply","subClass","superClass","create","constructor","setPrototypeOf","_inherits","_props","name","parentName","_props$props","childProps","_props$components","Layout","layoutProps","MDXContent","layout","render","className","href","smooth","duration","React","isMDXComponent","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf"],"mappings":"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","file":"component---src-blog-2022-03-17-firebase-remove-unused-push-tokens-mdx-39188e819977f6fb597d.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _mdxTag = require('./mdx-tag');\n\nObject.defineProperty(exports, 'MDXTag', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_mdxTag).default;\n  }\n});\n\nvar _mdxProvider = require('./mdx-provider');\n\nObject.defineProperty(exports, 'MDXProvider', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_mdxProvider).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withMDXComponents = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar _React$createContext = _react2.default.createContext({}),\n    Provider = _React$createContext.Provider,\n    Consumer = _React$createContext.Consumer;\n\nvar withMDXComponents = exports.withMDXComponents = function withMDXComponents(Component) {\n  return function (props) {\n    return _react2.default.createElement(Consumer, null, function (contextComponents) {\n      return _react2.default.createElement(Component, _extends({}, props, {\n        components: props.components || contextComponents\n      }));\n    });\n  };\n};\n\nvar MDXProvider = function MDXProvider(props) {\n  return _react2.default.createElement(Provider, {\n    value: props.components\n  }, props.children);\n};\n\nexports.default = MDXProvider;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _mdxProvider = require('./mdx-provider');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar defaults = {\n  inlineCode: 'code',\n  wrapper: 'div'\n};\n\nvar MDXTag = function (_Component) {\n  _inherits(MDXTag, _Component);\n\n  function MDXTag() {\n    _classCallCheck(this, MDXTag);\n\n    return _possibleConstructorReturn(this, (MDXTag.__proto__ || Object.getPrototypeOf(MDXTag)).apply(this, arguments));\n  }\n\n  _createClass(MDXTag, [{\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          name = _props.name,\n          parentName = _props.parentName,\n          _props$props = _props.props,\n          childProps = _props$props === undefined ? {} : _props$props,\n          children = _props.children,\n          _props$components = _props.components,\n          components = _props$components === undefined ? {} : _props$components,\n          Layout = _props.Layout,\n          layoutProps = _props.layoutProps;\n      var Component = components[parentName + '.' + name] || components[name] || defaults[name] || name;\n\n      if (Layout) {\n        return _react2.default.createElement(Layout, _extends({\n          components: components\n        }, layoutProps), _react2.default.createElement(Component, childProps, children));\n      }\n\n      return _react2.default.createElement(Component, childProps, children);\n    }\n  }]);\n\n  return MDXTag;\n}(_react.Component);\n\nexports.default = (0, _mdxProvider.withMDXComponents)(MDXTag);","\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  \n\nconst layoutProps = {\n  \n};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}><div className=\"blogpage\">\n    <a href={\"/blog\"} smooth duration={1000}>\n    {\"Back\"}\n    </a>\n</div>\n<div className=\"blogText\">\n<MDXTag name=\"h1\" components={components}>{`Invalidating unused Firebase push tokens using scheduled functions`}</MDXTag>\n<br/>\n<br/>\n<MDXTag name=\"p\" components={components}>{`Push messaging in modern mobile apps with Firebase is really common. The usual workflow is:`}</MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">\n<MDXTag name=\"p\" components={components} parentName=\"li\">{`Integrating Firebase push SDKs / Cocoapods / SPM packages within the app.`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">\n<MDXTag name=\"p\" components={components} parentName=\"li\">{`Registering a project on the Firebase console.`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">\n<MDXTag name=\"p\" components={components} parentName=\"li\">{`On native apps, configuring the Firebase library, requesting for notification permissions, obtaining push tokens and saving them to a backend service.`}</MDXTag>\n</MDXTag>\n</MDXTag>\n<MDXTag name=\"p\" components={components}>{`A lot of apps obtain push tokens at login (an optimal way of doing this is by requesting the current token from Firebase's local cache). Apps that support multiple users / login, usually also invalidate tokens on logout.\nBut what if the user never logs out, but removes / uninstall the app? 🤔`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`The best way to invalidate these tokens, unfortunately is by looking for errors when a push message is sent outbound, like so:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`admin.messaging().sendToDevice(tokens, message, options)\n    .then((response) => {\n        console.log('Successfully sent message:', response);\n    }).catch((error) => {\n        if (error.code === 'messaging/invalid-registration-token' ||\n            error.code === 'messaging/registration-token-not-registered') {\n            //a promise here to delete the token which can be pushed to an array,\n            //then return promise.all 👍\n        }\n    });\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`This is however problematic in apps that a) don't want to send out bulk outbound notifications and b) only support async notifications ie. notifications that go out when the\nuser performs an action.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`There's a better way. On closely inspecting the way Firebase functions sends out push notifications, I realised there is a `}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`sendToDevice(registrationToken: string | string[], payload: MessagingPayload, options?: MessagingOptions): Promise<MessagingDevicesResponse>;\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Here, `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`MessagingOptions`}</MDXTag>{` has a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`dryRun?: boolean`}</MDXTag>{` variable, when set to true, it won't actually send the push message but rather do a dry run.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Essentially, how we can create a `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://firebase.google.com/docs/functions/schedule-functions\"}}>{`scheduled`}</MDXTag>{` Firebase function that:\na) Polls for all push tokens`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`for (const [key, value] of tokens.entries()) {\n        allTokens.push(key);\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`b) sets dry run to true.`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`    const options = {\n        dryRun: true\n    }\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`c)  Finally, send out push notifications, poll for errors and remove invalid tokens:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`    admin.messaging().sendToDevice(allTokens, message, options)\n    .then((response) => {\n        response.results.forEach((deviceResult, index) => {\n            if (deviceResult.error) {\n                let failedToken = allTokens[index];\n                //push a promise to remove token from db.\n            }\n        });\n    });\n    return Promise.all(tokensToRemove);\n`}</MDXTag></MDXTag>\n</div>\n           </MDXTag>\n  }\n}\nMDXContent.isMDXComponent = true\n  ","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}"],"sourceRoot":""}