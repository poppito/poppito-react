<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.32.13"/><title data-react-helmet="true"></title><link rel="icon" href="/favicon-32x32.png?v=5c064402d8c94391a8a5abea59f08f1d" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#02aab0"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=5c064402d8c94391a8a5abea59f08f1d"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=5c064402d8c94391a8a5abea59f08f1d"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=5c064402d8c94391a8a5abea59f08f1d"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=5c064402d8c94391a8a5abea59f08f1d"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=5c064402d8c94391a8a5abea59f08f1d"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=5c064402d8c94391a8a5abea59f08f1d"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=5c064402d8c94391a8a5abea59f08f1d"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=5c064402d8c94391a8a5abea59f08f1d"/><link as="script" rel="preload" href="/webpack-runtime-c6208ea428815d8046b9.js"/><link as="script" rel="preload" href="/framework-e745cd5043ce1ab03c7c.js"/><link as="script" rel="preload" href="/app-be2b6174cf83d43951f4.js"/><link as="script" rel="preload" href="/4576f6ca28c3d93bcda1ddd31363381b6ebdf5c2-7238c2a62e3c167833ae.js"/><link as="script" rel="preload" href="/component---src-blog-2022-04-05-notification-permissions-android-13-mdx-8369c469242f0182beaa.js"/><link as="fetch" rel="preload" href="/page-data/2022-04-05-Notification-permissions-android-13/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3649515864.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="blogpage"><a href="/blog" duration="1000">Back</a></div><div class="blogText"><h1 color="#f9f9f9"></h1><div style="margin:0 auto;max-width:960px;padding:0px 1.0875rem 1.45rem;padding-top:0"><div><h1>Android 13 Preview 2</h1><p>Last weekend I finally got some time to have a play with the Android 13 emulator and I have to admit,
its a bit rough around the edges.</p><p>For example all the icons in the launcher are humongo üòÆ</p><img src="/static/android_13_icons-520b3d9c6866b1af5b0f295f5403834d.png" width="30%"/><p>Anyway nothing ventured, nothing gained I figured.</p><h1>Notifications and runtime permissions.</h1><p>The main goal I had in mind when I downloaded the new emulator was checking out the shiny new <code>POST_NOTIFICATIONS</code>
permission being introduced in Android 13.</p><p>So, what is it?</p><p>Well, iOS has had it for a while and essentially it is a permission prompt for Android apps targeting Android 13 (SDK level 33 and above)
asking the user whether they want to receieve notifications. I think this is a great win not only for user experience, but also a win from
the privacy perspective.</p><p>Anyway, here&#x27;s how I went about testing it üìù</p><ul><li>Downloading Android 13 (Codename Tiramisum) from the SDK manager.</li><li>In my app&#x27;s <code>build.gradle</code> changing the <code>compileSdkVersion</code> to  <code>android-Tiramisu</code> and <code>targetSdkVersion</code> to <code>Tiramisu</code>.</li><li>Downloading Android Studio Dolphin Canary 7.</li><li>Downloading Android build tools version <code>33.0.0 rc2</code> and updating the <code>buildToolsVersion</code> in my app&#x27;s <code>build.gradle</code> to <code>33.0.0-rc2</code></li><li>Downloading the emulator <code>arm64-v8a</code> image for <code>Android Tiramisu</code> in the emulator creation wizard in Android Studio.</li></ul><p>Ok, now we&#x27;re cooking with gas üî•</p><p>Because this is a runtime permission, you also need to follow the general steps üìù</p><ul><li>Call the <code>checkSelfPermission</code> API for <code>POST_NOTIFICATIONS</code>,</li><li>If this does not return <code>PERMISSION_GRANTED</code>,</li><li>Then check if the permission rationale (ie. why you need this permission) dialog.</li><li>If it returns false, you can call <code>requestPermissions</code> for <code>POST_NOTIFICATIONS</code> directly.</li><li>If in the the permission rationale dialog, the user clicks the <code>positiveButton</code>, call <code>requestPermissions</code> for <code>POST_NOTIFICATIONS</code>.</li></ul><p>unfortunately, checking for <code>SDK_INT &gt;= 33</code> does not work currently, so I had to make do with calling <code>SDK_INT &gt;= 32</code> instead.</p><pre><code>        if (Build.VERSION.SDK_INT &gt;= 32) {
            String[] permission = {POST_NOTIFICATIONS};
            if (checkSelfPermission(POST_NOTIFICATIONS) != PackageManager.PERMISSION_GRANTED) {
                if (!shouldShowRequestPermissionRationale(POST_NOTIFICATIONS)) {
                    requestPermissions(permission, 1001);
                } else {
                    showNotificationRationale();
                }
            }
        }
</code></pre><div align="center"><h3> Here&#x27;s what it looks like üëå </h3><video width="30%" controls="" autoplay="" src="/static/notification_permissions-d227e070a3ae488ad0e334ff4e93c650.webm" type="video/mp4"></video></div></div><br/><br/><br/><br/><p>Questions? Suggestions? Compliments? Tips to make this post better? I&#x27;d love to hear your thoughts <a href="https://twitter.com/overjeer">on twitter</a></p></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2022-04-05-Notification-permissions-android-13";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-36b45defc28edeaa1b6f.js"],"app":["/app-be2b6174cf83d43951f4.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-ad6431e4664bcf916d19.js"],"component---src-blog-2016-12-30-license-details-mdx":["/component---src-blog-2016-12-30-license-details-mdx-54636640cb9de6a2199b.js"],"component---src-blog-2016-12-30-why-dropbox-mdx":["/component---src-blog-2016-12-30-why-dropbox-mdx-1bce888f7d2ed8e5ea65.js"],"component---src-blog-2016-12-31-privacy-policy-mdx":["/component---src-blog-2016-12-31-privacy-policy-mdx-04c96da1f3faa33d0449.js"],"component---src-blog-2017-03-31-privacy-policy-straya-mate-mdx":["/component---src-blog-2017-03-31-privacy-policy-straya-mate-mdx-b46c6fc4ae982337af88.js"],"component---src-blog-2017-11-17-google-play-games-for-fun-and-profit-but-mostly-fun-mdx":["/component---src-blog-2017-11-17-google-play-games-for-fun-and-profit-but-mostly-fun-mdx-8a1f137307407bd14cb9.js"],"component---src-blog-2017-12-09-app-monetisation-and-in-app-billing-implementation-mdx":["/component---src-blog-2017-12-09-app-monetisation-and-in-app-billing-implementation-mdx-b068dc012a5543dfd03f.js"],"component---src-blog-2018-03-25-privacy-policy-strayamate-i-os-mdx":["/component---src-blog-2018-03-25-privacy-policy-strayamate-i-os-mdx-84ea0008678b6a952746.js"],"component---src-blog-2018-03-25-privacy-policy-turnt-app-i-os-mdx":["/component---src-blog-2018-03-25-privacy-policy-turnt-app-i-os-mdx-13ed9d234e16fbf02154.js"],"component---src-blog-2019-01-13-footy-stars-mdx":["/component---src-blog-2019-01-13-footy-stars-mdx-108a1a089b110dd51c81.js"],"component---src-blog-2019-01-30-strayamate-lite-mdx":["/component---src-blog-2019-01-30-strayamate-lite-mdx-1468ca4a5bea1ba2ac53.js"],"component---src-blog-2019-03-18-testing-android-q-beta-without-an-actual-pixel-device-is-hard-mdx":["/component---src-blog-2019-03-18-testing-android-q-beta-without-an-actual-pixel-device-is-hard-mdx-66ca809b050c808a8771.js"],"component---src-blog-2019-04-06-in-app-billing-implementation-v-1-2-mdx":["/component---src-blog-2019-04-06-in-app-billing-implementation-v-1-2-mdx-fe2256d434863a712596.js"],"component---src-blog-2019-04-14-foldable-emulators-in-android-studio-mdx":["/component---src-blog-2019-04-14-foldable-emulators-in-android-studio-mdx-680f5cd605c2c6896ede.js"],"component---src-blog-2019-05-02-zen-of-conferences-mdx":["/component---src-blog-2019-05-02-zen-of-conferences-mdx-2e3dfe42b9dffce24cae.js"],"component---src-blog-2019-05-14-privacy-policy-aussie-slang-action-on-google-mdx":["/component---src-blog-2019-05-14-privacy-policy-aussie-slang-action-on-google-mdx-a1b3eb20c17d767f9763.js"],"component---src-blog-2019-06-01-io-2019-a-11-y-mdx":["/component---src-blog-2019-06-01-io-2019-a-11-y-mdx-7025534d445ef7032ca3.js"],"component---src-blog-2019-09-28-relasing-an-app-mdx":["/component---src-blog-2019-09-28-relasing-an-app-mdx-8f1479ac946c0f9d0183.js"],"component---src-blog-2019-12-08-huxtable-android-privacy-policy-mdx":["/component---src-blog-2019-12-08-huxtable-android-privacy-policy-mdx-4e57aae2c3030eb9a3c2.js"],"component---src-blog-2019-12-08-huxtable-privacy-policy-mdx":["/component---src-blog-2019-12-08-huxtable-privacy-policy-mdx-f15fd0a22695e37e23ee.js"],"component---src-blog-2019-12-09-huxtable-preview-mdx":["/component---src-blog-2019-12-09-huxtable-preview-mdx-b71b1a25551ba8e03459.js"],"component---src-blog-2020-02-09-huxtable-preview-android-i-phone-mdx":["/component---src-blog-2020-02-09-huxtable-preview-android-i-phone-mdx-4e5a3d109519180d556c.js"],"component---src-blog-2020-03-06-privacy-policy-handwash-hygiene-mdx":["/component---src-blog-2020-03-06-privacy-policy-handwash-hygiene-mdx-e0084ea637e2c082bfba.js"],"component---src-blog-2020-04-25-testing-behaviour-changes-android-11-mdx":["/component---src-blog-2020-04-25-testing-behaviour-changes-android-11-mdx-7adc3ba4f8e345b25b11.js"],"component---src-blog-2020-05-08-particle-paradox-privacy-policy-mdx":["/component---src-blog-2020-05-08-particle-paradox-privacy-policy-mdx-07e866f98753abd405d6.js"],"component---src-blog-2020-08-22-in-app-reviews-play-core-api-mdx":["/component---src-blog-2020-08-22-in-app-reviews-play-core-api-mdx-57813eca5ff0c642fa0c.js"],"component---src-blog-2020-12-26-a-neat-trick-for-testing-on-the-play-store-mdx":["/component---src-blog-2020-12-26-a-neat-trick-for-testing-on-the-play-store-mdx-f3f7deae60e8e90026c2.js"],"component---src-blog-2021-04-14-privacy-policy-anzac-day-stickers-mdx":["/component---src-blog-2021-04-14-privacy-policy-anzac-day-stickers-mdx-e3c0355c1513becf080b.js"],"component---src-blog-2021-04-22-privacy-policy-family-stickers-mdx":["/component---src-blog-2021-04-22-privacy-policy-family-stickers-mdx-29844b72a2696ec2028a.js"],"component---src-blog-2022-03-17-firebase-remove-unused-push-tokens-mdx":["/component---src-blog-2022-03-17-firebase-remove-unused-push-tokens-mdx-bf1e22da20f9d009e567.js"],"component---src-blog-2022-04-05-notification-permissions-android-13-mdx":["/component---src-blog-2022-04-05-notification-permissions-android-13-mdx-8369c469242f0182beaa.js"],"component---src-pages-404-js":["/component---src-pages-404-js-a0cd0e9abde18d86322f.js"],"component---src-pages-app-ads-txt-js":["/component---src-pages-app-ads-txt-js-97a9ed73e1e10e2f981f.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-c67182092f2dd26a25bf.js"],"component---src-pages-index-js":["/component---src-pages-index-js-e380e291a78b36616ca0.js"]};/*]]>*/</script><script src="/polyfill-36b45defc28edeaa1b6f.js" nomodule=""></script><script src="/component---src-blog-2022-04-05-notification-permissions-android-13-mdx-8369c469242f0182beaa.js" async=""></script><script src="/4576f6ca28c3d93bcda1ddd31363381b6ebdf5c2-7238c2a62e3c167833ae.js" async=""></script><script src="/app-be2b6174cf83d43951f4.js" async=""></script><script src="/framework-e745cd5043ce1ab03c7c.js" async=""></script><script src="/webpack-runtime-c6208ea428815d8046b9.js" async=""></script></body></html>