{"version":3,"sources":["webpack:///./src/pages/2017-12-09-App-monetisation-and-In-App-Billing-implementation.mdx","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"],"names":["_frontmatter","layoutProps","MDXContent","components","props","mdxType","className","href","smooth","duration","parentName","align","src","isMDXComponent","_objectWithoutPropertiesLoose","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf"],"mappings":"mPAOaA,EAAe,CAC1B,KAAQ,gEACR,MAAS,kDACT,KAAQ,yBACR,WAAc,QAEVC,EAAc,CAClBD,gBAGa,SAASE,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,EACF,iBACD,OAAO,YALS,UAKT,iBAAeH,EAAiBG,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAC5E,mBAAKC,UAAU,YACf,iBAAGC,KAAM,QAASC,QAAM,EAACC,SAAU,KAClC,SAGD,mBAAKH,UAAU,YACb,wDACA,uBACA,uBACA,61BACA,8CACA,+LAA8K,iBAAGI,WAAW,IACxL,KAAQ,gEADkK,gCAA9K,2gBAGA,6CACA,4BAAW,0BAAYA,WAAW,KAAvB,iBAAX,kDAAuH,iBAAGA,WAAW,IACjI,KAAQ,0EAD2G,wBAAvH,oCAEsE,iBAAGA,WAAW,IAChF,KAAQ,8DAD0D,sBAFtE,uCAKA,sBACE,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,2BAA+C,0BAAYA,WAAW,KAAvB,YAA/C,WAA+G,0BAAYA,WAAW,KAAvB,iBAA/G,4BAAqM,0BAAYA,WAAW,KAAvB,WAArM,+CAAwS,0BAAYA,WAAW,KAAvB,WAAxS,yBAAqX,0BAAYA,WAAW,KAAvB,4BAArX,kJACA,mBAAKA,WAAW,MAAK,oBAAMA,WAAW,OAAjB,wHAKvB,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,oEAAwF,0BAAYA,WAAW,KAAvB,kBAAxF,WAA8J,0BAAYA,WAAW,KAAvB,uBAA9J,UACA,mBAAKA,WAAW,MAAK,oBAAMA,WAAW,OAAjB,sEAGvB,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,iBAAqC,0BAAYA,WAAW,KAAvB,4BAArC,8BAAwI,0BAAYA,WAAW,KAAvB,sBAAxI,uGAA8S,0BAAYA,WAAW,KAAvB,gBAA9S,6BAAoY,iBAAGA,WAAW,IAC9Y,KAAQ,4GADwX,gBAApY,yCAEmE,0BAAYA,WAAW,KAAvB,sBAFnE,iBAEmJ,0BAAYA,WAAW,KAAvB,4BAFnJ,0EAEkS,0BAAYA,WAAW,KAAvB,QAFlS,kCAEqX,0BAAYA,WAAW,KAAvB,iBAFrX,6HAE4iB,0BAAYA,WAAW,KAAvB,OAF5iB,uBAGA,mBAAKA,WAAW,MAAK,oBAAMA,WAAW,OAAjB,8TASvB,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,uDAA2E,0BAAYA,WAAW,KAAvB,kBAA3E,kFAAwN,0BAAYA,WAAW,KAAvB,8BAAxN,8DAA6V,0BAAYA,WAAW,KAAvB,mBAA7V,0FAAmf,0BAAYA,WAAW,KAAvB,gCAAnf,oIACA,mBAAKA,WAAW,MAAK,oBAAMA,WAAW,OAAjB,ojBAgBrB,iBAAGA,WAAW,MAAd,6DAAiF,0BAAYA,WAAW,KAAvB,6BAAjF,OAA8J,0BAAYA,WAAW,KAAvB,QAA9J,yFAAwS,0BAAYA,WAAW,KAAvB,SAAxS,MAEF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,uBAA2C,0BAAYA,WAAW,KAAvB,OAA3C,mDAA8I,0BAAYA,WAAW,KAAvB,UAA9I,kBAAmN,sBAAQA,WAAW,KAAnB,kBAAnN,4EAAkV,sBAAQA,WAAW,KAAnB,kBAAlV,8BACA,iBAAGA,WAAW,MAAd,UAA8B,sBAAQA,WAAW,KAAnB,gBAA9B,WAA0F,sBAAQA,WAAW,KAAnB,kBAA1F,kCAA+K,sBAAQA,WAAW,KAAnB,mBAA/K,aAAgP,sBAAQA,WAAW,KAAnB,yBAAhP,2GAAqZ,0BAAYA,WAAW,KAAvB,OAArZ,aAAkd,sBAAQA,WAAW,KAAnB,mBACld,iBAAGA,WAAW,MAAd,uYAA2Z,0BAAYA,WAAW,KAAvB,kBAA3Z,KACA,iBAAGC,MAAM,UACP,mBAAKC,IAAI,2CAEX,iBAAGD,MAAM,UACP,mBAAKC,IAAI,uCAEX,iBAAGF,WAAW,MAAd,0BAA8C,0BAAYA,WAAW,KAAvB,OAA9C,sBAAoH,0BAAYA,WAAW,KAAvB,cAApH,YACA,mBAAKA,WAAW,MAAK,oBAAMA,WAAW,OAAjB,qEAGvB,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,sEAA0F,sBAAQA,WAAW,KAAnB,kBAA1F,uCAAoL,0BAAYA,WAAW,KAAvB,6BAApL,qBAA+Q,0BAAYA,WAAW,KAAvB,kBAA/Q,KACA,mBAAKA,WAAW,MAAK,oBAAMA,WAAW,OAAjB,iiCAqBvB,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,6FAAiH,0BAAYA,WAAW,KAAvB,6BAAjH,gFAAuQ,0BAAYA,WAAW,KAAvB,kBAAvQ,mGAAqa,0BAAYA,WAAW,KAAvB,kBAAra,yBAAyf,0BAAYA,WAAW,KAAvB,6BAAzf,KACA,mBAAKA,WAAW,MAAK,oBAAMA,WAAW,OAAjB,2wBAcvB,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,8CACA,kBAAIA,WAAW,MACb,kBAAIA,WAAW,MAAf,aAAkC,0BAAYA,WAAW,MAAvB,iBAAlC,KACA,kBAAIA,WAAW,MAAf,gBAAqC,0BAAYA,WAAW,MAAvB,iBAArC,KACA,kBAAIA,WAAW,MAAf,2BAAgD,0BAAYA,WAAW,MAAvB,4BAAhD,cACA,kBAAIA,WAAW,MAAf,6CAAkE,0BAAYA,WAAW,MAAvB,OAAlE,6BAAgJ,0BAAYA,WAAW,MAAvB,kBAAhJ,OAAmN,0BAAYA,WAAW,MAAvB,6BAAnN,MAEF,iBAAGA,WAAW,MAAd,wOAGJ,4CACA,sBACE,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,iHAAqI,0BAAYA,WAAW,KAAvB,aAArI,oBAA+M,0BAAYA,WAAW,KAAvB,iBAA/M,uDAAgU,iBAAGA,WAAW,IAC1U,KAAQ,oCADoT,UAAhU,kCAEsD,0BAAYA,WAAW,KAAvB,aAFtD,yEAIF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,0DAA8E,0BAAYA,WAAW,KAAvB,kBAA9E,0WACA,iBAAGA,WAAW,MAAK,sBAAQA,WAAW,KAAnB,qJAA6K,iBAAGA,WAAW,SACxM,KAAQ,gCADkL,mBAU1MR,EAAWW,gBAAiB,G,kCC3Kb,SAASC,EAA8BC,EAAQC,GAC5D,GAAc,MAAVD,EAAgB,MAAO,GAC3B,IAEIE,EAAKC,EAFLC,EAAS,GACTC,EAAaC,OAAOC,KAAKP,GAG7B,IAAKG,EAAI,EAAGA,EAAIE,EAAWG,OAAQL,IACjCD,EAAMG,EAAWF,GACbF,EAASQ,QAAQP,IAAQ,IAC7BE,EAAOF,GAAOF,EAAOE,IAGvB,OAAOE,EAZT","file":"component---src-pages-2017-12-09-app-monetisation-and-in-app-billing-implementation-mdx-1be4c51843debcf36f85.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"slug\": \"2017-12-09-App-monetisation-and-In-App-Billing-implementation\",\n  \"title\": \"App monetisation and In-App Billing in Android.\",\n  \"date\": \"2017-12-08 19:30 +1100\",\n  \"categories\": \"blog\"\n};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\";\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <div className=\"blogpage\">\n    <a href={\"/blog\"} smooth duration={1000}>\n    {\"Back\"}\n    </a>\n    </div>\n    <div className=\"blogText\">\n      <h1>{`Android apps and monetisation.`}</h1>\n      <br />\n      <br />\n      <p>{`Some devs make apps for fun, some make them for learning things. But if you've got a good app idea, chances are you want to be able to monetise it. With Android, there are several ways of going about it i.e. putting in ads - which relies on not only high volumes of downloads but large amounts of ad screen time - or you could sell a paid app - but that's not without its challenges. A lot of mobile users will want to be able to try your app just so they can work out if it's worth their while. This would perhaps mean publishing a trial version of your app and then subtly diverting these users to a paid version - but this does mean you'd have to then publish two versions of your app - however, you're still splitting your audience across two apps - this means splitting your ratings, downloads and app indexation on the Play store!`}</p>\n      <h1>{`Best of both worlds.`}</h1>\n      <p>{`There is a better way. You can combine these two monetisation models by building a single version of your app and introducing paid features in your app - by using the `}<a parentName=\"p\" {...{\n          \"href\": \"https://developer.android.com/google/play/billing/index.html\"\n        }}>{`Android's In-App Billing API`}</a>{` - and its super easy to implement. There are a couple of things you'll want to work out first though - for example whether you want to charge your users with a subscription model i.e. something a media service would charge its users every month or over some other pre-determined amount of time, or have a consumable feature - i.e. something like ammo in a game - but in this particular example we're going to be focussing on having a perpetually unlockable feature which really is a baseline implementation of the lot.`}</p>\n      <h1>{`Let's give it a go.`}</h1>\n      <p>{`The `}<inlineCode parentName=\"p\">{`BillingClient`}</inlineCode>{` convenience class provides a gateway into the `}<a parentName=\"p\" {...{\n          \"href\": \"https://developer.android.com/google/play/billing/billing_library.html\"\n        }}>{`Play Billing Library`}</a>{` and abstracts away calls to the `}<a parentName=\"p\" {...{\n          \"href\": \"https://developer.android.com/google/play/billing/api.html\"\n        }}>{`In-App billing API`}</a>{` for us. Here's how to leverage it:`}</p>\n      <ul>\n        <li parentName=\"ul\">\n          <p parentName=\"li\">{`First we need to get an `}<inlineCode parentName=\"p\">{`instance`}</inlineCode>{` of the `}<inlineCode parentName=\"p\">{`BillingClient`}</inlineCode>{`. There is a convenience `}<inlineCode parentName=\"p\">{`Builder`}</inlineCode>{` class that requires the calling Activity's `}<inlineCode parentName=\"p\">{`Context`}</inlineCode>{`. We can also set the `}<inlineCode parentName=\"p\">{`PurchasesUpdatedListener`}</inlineCode>{` callback here which is important because we want to be notified of when the billing flow is complete and the user has been charged of course!`}</p>\n          <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`mBillingClient = BillingClient.newBuilder(mContext)\n               .setListener(this)\n               .build();\n`}</code></pre>\n        </li>\n        <li parentName=\"ul\">\n          <p parentName=\"li\">{`Let's take a quick detour and also update our permissions to use `}<inlineCode parentName=\"p\">{`In-App Billing`}</inlineCode>{` in our `}<inlineCode parentName=\"p\">{`AndroidManifest.xml`}</inlineCode>{` file.`}</p>\n          <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`<uses-permission android:name=\"com.android.vending.BILLING\" />\n`}</code></pre>\n        </li>\n        <li parentName=\"ul\">\n          <p parentName=\"li\">{`We set up the `}<inlineCode parentName=\"p\">{`PurchasesUpdatedListener`}</inlineCode>{` previously - so, when the `}<inlineCode parentName=\"p\">{`onPurchasesUpdated`}</inlineCode>{` callback gets notified - there are a couple of things to check. Firstly, there is an integer value `}<inlineCode parentName=\"p\">{`responseCode`}</inlineCode>{`. You can read about what `}<a parentName=\"p\" {...{\n              \"href\": \"https://developer.android.com/reference/com/android/billingclient/api/BillingClient.BillingResponse.html\"\n            }}>{`responseCode`}</a>{` means but for now, we're looking for `}<inlineCode parentName=\"p\">{`BillingResponse.OK`}</inlineCode>{`. Secondly, a `}<inlineCode parentName=\"p\">{`@nullable List<Purchase>`}</inlineCode>{` value - we can iterate over all of its values and look for particular `}<inlineCode parentName=\"p\">{`skus`}</inlineCode>{` - more on this later. Because `}<inlineCode parentName=\"p\">{`List<Purchas>`}</inlineCode>{` is nullable, its always a good idea to guard it with a null check of course and then iterate over to see if the required `}<inlineCode parentName=\"p\">{`sku`}</inlineCode>{` has been returned.`}</p>\n          <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`if (purchases.size() > 0) {\n                for (Purchase result : purchases) {\n                    if (result.getSku().equals(mContext.getResources().getString(skuOfInterest))) {\n                        //the billing flow has completed successfully.\n                    }\n                }\n            }\n`}</code></pre>\n        </li>\n        <li parentName=\"ul\">\n          <p parentName=\"li\">{`Sweet. Now, we're Ok to go ahead and connect up our `}<inlineCode parentName=\"p\">{`mBillingClient`}</inlineCode>{`, we've previously built and added a callback to. We are required to pass in a `}<inlineCode parentName=\"p\">{`BillingClientStateListener`}</inlineCode>{`. Basically, this callback comes back with a integer value `}<inlineCode parentName=\"p\">{`BillingResponse`}</inlineCode>{` code which helps us determine if connnectivity was successful or not. There is also a `}<inlineCode parentName=\"p\">{`onBillingServiceDisconnected`}</inlineCode>{` method which is needed to be queried and consequently we need to return some meaningful feedback error to the user if required.`}</p>\n          <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`mBillingClient.startConnection(new BillingClientStateListener() {\n        @Override\n        public void onBillingSetupFinished(int responseCode) {\n            if (responseCode == BillingClient.BillingResponse.OK) {\n                mIsBillingClientConnected = true;\n                //do other interesting things here - as we're connected now.\n            }\n        }\n\n        @Override\n        public void onBillingServiceDisconnected() {\n           mIsBillingClientConnected = false;\n           //handle this failure gracefully.\n       }\n    }\n`}</code></pre>\n          <p parentName=\"li\">{`now we know that we can query the In-App billing API when `}<inlineCode parentName=\"p\">{`mIsBillingClientConnected`}</inlineCode>{` is `}<inlineCode parentName=\"p\">{`true`}</inlineCode>{` and gracefully try either reconnecting or show an error response of sorts when it is `}<inlineCode parentName=\"p\">{`false`}</inlineCode>{`.`}</p>\n        </li>\n        <li parentName=\"ul\">\n          <p parentName=\"li\">{`Now we've mentioned `}<inlineCode parentName=\"p\">{`sku`}</inlineCode>{`s a few times in previous steps. This is just a `}<inlineCode parentName=\"p\">{`String`}</inlineCode>{` value that an `}<strong parentName=\"p\">{`In-App product`}</strong>{` gets given when we generate one. Let's explore this here - we'll add an `}<strong parentName=\"p\">{`In-app product`}</strong>{` that we can bill against.`}</p>\n          <p parentName=\"li\">{`On the `}<strong parentName=\"p\">{`Play Console`}</strong>{`, under `}<strong parentName=\"p\">{`Store Presence`}</strong>{`, there is an option to create `}<strong parentName=\"p\">{`In-App products`}</strong>{` click on `}<strong parentName=\"p\">{`Add a Managed Product`}</strong>{` - then give it an id (only underscores, lowercase letters and digits allowed!) - which will become the `}<inlineCode parentName=\"p\">{`sku`}</inlineCode>{` for your `}<strong parentName=\"p\">{`In-App Product`}</strong></p>\n          <p parentName=\"li\">{`Next, give it a title and a description as well as price. This will show up when a user tries to buy your In-app product through your app, so make it short and simple. The Play console does automatic currency conversions for countries your app is supported in - so if you need to tweak that for individual countries - you can it here as well. Finally, click  on save and it will add your `}<inlineCode parentName=\"p\">{`In-App product`}</inlineCode>{`.`}</p>\n          <p align=\"center\">\n            <img src=\"../images/billing/in-app-products.png\" />\n          </p>\n          <p align=\"center\">\n            <img src=\"../images/billing/add-product.png\" />\n          </p>\n          <p parentName=\"li\">{`Now that you've got an `}<inlineCode parentName=\"p\">{`sku`}</inlineCode>{`, you can create a `}<inlineCode parentName=\"p\">{`@StringRes`}</inlineCode>{` for it.`}</p>\n          <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`<string name=\"id_sku_my_product\">01_my_first_product</string>\n`}</code></pre>\n        </li>\n        <li parentName=\"ul\">\n          <p parentName=\"li\">{`Nearly there! Now you can query for if the user has purchased your `}<strong parentName=\"p\">{`In-App Product`}</strong>{`. This is determined by running the `}<inlineCode parentName=\"p\">{`queryPurchaseHistoryAsync`}</inlineCode>{` callback on your `}<inlineCode parentName=\"p\">{`mBillingClient`}</inlineCode>{`.`}</p>\n          <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`mBillingClient.queryPurchaseHistoryAsync(BillingClient.SkuType.INAPP,\n             new PurchaseHistoryResponseListener() {\n                 @Override\n                 public void onPurchaseHistoryResponse(@BillingClient.BillingResponse int responseCode,\n                                                       List<Purchase> purchasesList) {\n                     if (responseCode == BillingClient.BillingResponse.OK) {\n                         if (purchasesList != null) {\n                             if (purchasesList.size() > 0) {\n                                 for (Purchase result : purchasesList) {\n                                     if (result.getSku().equals(mContext.getResources().getString(R.string.01_my_first_product))) {\n                                         //success! your user has bought your In-App product. Woohoo!\n                                     }\n                                 }\n\n                             }\n                         }\n                     }\n                 }\n             });\n`}</code></pre>\n        </li>\n        <li parentName=\"ul\">\n          <p parentName=\"li\">{`Although, Android gives you some more convenience on top of this. You do not need to call `}<inlineCode parentName=\"p\">{`queryPurchaseHistoryAsync`}</inlineCode>{` everytime. Purchases are cached by the Play store app - so you can just run `}<inlineCode parentName=\"p\">{`queryPurchases`}</inlineCode>{`. So, what naturally follows is that you would use this call to see if it comes back with legit `}<inlineCode parentName=\"p\">{`PurchaseResult`}</inlineCode>{`, if not you can run  `}<inlineCode parentName=\"p\">{`queryPurchaseHistoryAsync`}</inlineCode>{`.`}</p>\n          <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`Purchase.PurchasesResult purchasesResult = mBillingClient.queryPurchases(BillingClient.SkuType.INAPP);\n                  if (purchasesResult != null) {\n                      if (purchasesResult.getPurchasesList() != null) {\n                          if (purchasesResult.getPurchasesList().size() > 0) {\n                              for (Purchase result : purchasesResult.getPurchasesList()) {\n                                  if (result.getSku().equals(mContext.getResources().getString(R.string.01_my_first_product))) {\n                                      //success! your user has bought your In-App product. Wowie!\n                                  }\n                              }\n                          }\n                      }\n                  }\n`}</code></pre>\n        </li>\n        <li parentName=\"ul\">\n          <p parentName=\"li\">{`Ok, so that's the basic flow. Let's recap:`}</p>\n          <ol parentName=\"li\">\n            <li parentName=\"ol\">{`Build the `}<inlineCode parentName=\"li\">{`BillingClient`}</inlineCode>{`.`}</li>\n            <li parentName=\"ol\">{`Connect said `}<inlineCode parentName=\"li\">{`BillingClient`}</inlineCode>{`.`}</li>\n            <li parentName=\"ol\">{`On success, pass in the `}<inlineCode parentName=\"li\">{`purchasesUpdatedListener`}</inlineCode>{` callback.`}</li>\n            <li parentName=\"ol\">{`When purchases are updated query for your `}<inlineCode parentName=\"li\">{`sku`}</inlineCode>{` by running first running `}<inlineCode parentName=\"li\">{`queryPurchases`}</inlineCode>{` or `}<inlineCode parentName=\"li\">{`queryPurchaseHistoryAsync`}</inlineCode>{`.`}</li>\n          </ol>\n          <p parentName=\"li\">{`But what about users that have already bought your product? Well, you'll have to run this process at the start of your app too! Users that have already bought your app don't need to be run through a purchase process of course!`}</p>\n        </li>\n      </ul>\n      <h1>{`Optimisation tips.`}</h1>\n      <ul>\n        <li parentName=\"ul\">\n          <p parentName=\"li\">{`It almost seems like you're going to have to follow the billing process twice. You're just better off using a `}<inlineCode parentName=\"p\">{`Singleton`}</inlineCode>{` instance of the `}<inlineCode parentName=\"p\">{`BillingClient`}</inlineCode>{`. If you're using a DI framework like the excellent `}<a parentName=\"p\" {...{\n              \"href\": \"https://google.github.io/dagger/\"\n            }}>{`Dagger`}</a>{`, you're better off creating a `}<inlineCode parentName=\"p\">{`Singleton`}</inlineCode>{` component on your dependency graph and then injecting it as needed.`}</p>\n        </li>\n        <li parentName=\"ul\">\n          <p parentName=\"li\">{`One of the biggest challenges for me was the fact that `}<inlineCode parentName=\"p\">{`In-App Billing`}</inlineCode>{` was not showing up on the Play console. That'd be because my production APK didn't have the In-App billing permissions. This is easily remedied by creating an Alpha release of your app - and actually its highly recommended because you can then use test accounts to test the purchase flows. As long as your test users are added as alpha testers for your app!`}</p>\n          <p parentName=\"li\"><strong parentName=\"p\">{`Questions? Suggestions? Compliments? Tips to make this post better? I'd love to hear your thoughts! Join the conversation on twitter and tweet to `}<a parentName=\"strong\" {...{\n                \"href\": \"https://twitter.com/overjeer\"\n              }}>{`@overjeer`}</a></strong></p>\n        </li>\n      </ul>\n    </div>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}"],"sourceRoot":""}